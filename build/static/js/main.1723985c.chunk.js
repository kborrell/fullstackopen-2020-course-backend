(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=t(4),i=t(2),l=t(3),m=t.n(l),s="/api/persons",d=function(){return m.a.get(s).then((function(e){return e.data}))},f=function(e){return m.a.post(s,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e))},p=function(e,n){return m.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},v=(t(37),function(e){var n=e.nameFilter,t=e.onFilterChanged;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))}),b=function(e){var n=e.onSubmit,t=e.name,a=e.phone,o=e.onNameChanged,c=e.onPhoneChanged;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:o})),r.a.createElement("div",null,"phone: ",r.a.createElement("input",{value:a,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},E=function(e){var n=e.persons,t=e.nameFilter,a=e.onDeletePerson,o=t?n.filter((function(e){return e.name.includes(t)})):n;return r.a.createElement("div",null,o.map((function(e){return r.a.createElement(g,{key:e.name,person:e,onDeletePerson:a})})))},g=function(e){var n=e.person,t=e.onDeletePerson;return r.a.createElement("p",{key:n.name},n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n)}},"delete"))},j=function(e){var n=e.message;return n?r.a.createElement("div",{className:"error"},n):null},O=function(e){var n=e.message;return n?r.a.createElement("div",{className:"success"},n):null},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),l=Object(i.a)(c,2),m=l[0],s=l[1],g=Object(a.useState)(""),w=Object(i.a)(g,2),C=w[0],k=w[1],S=Object(a.useState)(""),P=Object(i.a)(S,2),y=P[0],D=P[1],F=Object(a.useState)(void 0),N=Object(i.a)(F,2),I=N[0],J=N[1],x=Object(a.useState)(void 0),A=Object(i.a)(x,2),B=A[0],T=A[1];Object(a.useEffect)((function(){d().then((function(e){return o(e)}))}),[]);var q=function(e,n,t){e(n),setTimeout((function(){return e("")}),t)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{message:B}),r.a.createElement(j,{message:I}),r.a.createElement(v,{persons:t,onFilterChanged:function(e){return D(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(b,{onSubmit:function(e){if(e.preventDefault(),m.length>0){var n=t.find((function(e){return e.name===m}));if(n){if(!window.confirm("".concat(m," is already added to the phonebook, replace the old number with a new one?")))return;var a=Object(u.a)(Object(u.a)({},n),{},{number:C});p(a.id,a).then((function(e){o(t.map((function(n){return n.id===e.id?e:n}))),s(""),k("")})).catch((function(e){404===e.response.status?q(J,"Information of ".concat(m," has already been removed from the server"),4e3):q(J,e.response.data.error,4e3),s(""),k("")}))}else{f({name:m,number:C}).then((function(e){var n=t.concat(e);o(n),s(""),k(""),J(""),q(T,"Added ".concat(e.name),4e3)})).catch((function(e){console.log(e),q(J,e.response.data.error,4e3)}))}}else window.alert("Name field can't be empty")},name:m,phone:C,onNameChanged:function(e){return s(e.target.value)},onPhoneChanged:function(e){return k(e.target.value)}}),r.a.createElement("h3",null,"Phones"),r.a.createElement(E,{persons:t,nameFilter:y,onDeletePerson:function(e){return n=e,void(window.confirm("Delete ".concat(n.name,"?"))&&h(n.id).then((function(){return o(t.filter((function(e){return e.id!==n.id})))})));var n}}))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1723985c.chunk.js.map